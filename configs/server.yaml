# Argus Server Configuration
server:
  # Agent listener address
  listen_addr: ":8443"
  
  # REST API address
  api_addr: ":8080"
  
  # TLS configuration (required for production)
  tls:
    enabled: true
    cert_file: "certs/server.crt"
    key_file: "certs/server.key"
    ca_file: "certs/ca.crt"
    client_auth: true  # Require client certificates
  
  # Authentication
  auth:
    jwt_secret: "${JWT_SECRET}"  # Set via environment variable
    token_expiry: "24h"
    refresh_enabled: true
    
  # Session management
  session:
    timeout: "24h"
    max_sessions_per_user: 5
    
  # Agent limits
  agents:
    max_connections: 10000
    heartbeat_interval: "30s"
    heartbeat_timeout: "90s"
    
  # Audit logging
  audit:
    enabled: true
    log_file: "logs/audit.log"
    retention_days: 90

# Database configuration (optional, defaults to in-memory)
database:
  type: "sqlite"  # sqlite, postgres, mysql
  connection: "data/argus.db"
  # connection: "postgres://user:pass@localhost/argus?sslmode=require"

# Logging configuration
logging:
  level: "info"  # debug, info, warn, error
  format: "json"  # json, text
  output: "stdout"  # stdout, file
  file: "logs/server.log"
  max_size: 100  # MB
  max_backups: 10
  max_age: 30  # days

# Metrics and monitoring
metrics:
  enabled: true
  addr: ":9090"
  path: "/metrics"

# Rate limiting
rate_limit:
  enabled: true
  requests_per_second: 100
  burst: 200

# CORS configuration (for web dashboard)
cors:
  enabled: true
  allowed_origins:
    - "https://dashboard.example.com"
  allowed_methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
  allowed_headers:
    - "Authorization"
    - "Content-Type"
    - "X-API-Key"
